(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/pot.cb30fab2.jpg"},38:function(e,t,a){e.exports=a.p+"static/media/404_glitch2.119ecb7e.gif"},41:function(e,t,a){e.exports=a(71)},65:function(e,t,a){},66:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(1),c=a(2),o=a(4),u=a(3),s=a(5),i=a(6),m=a(16),h=a(8),p=a.n(h);function d(e,t){return function(a){function n(){var e;return Object(r.a)(this,n),(e=Object(o.a)(this,Object(u.a)(n).call(this))).state={loading:!0,redirect:!1,intendedPath:"",message:""},e}return Object(s.a)(n,a),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,a={authorization:"Bearer "+localStorage.getItem("token")};if(t){this.setState({intendedPath:t});var n=t.slice(1);n=n.replace(/-/g," "),this.setState({message:"Please log in to access ".concat(n)})}else this.setState({message:"Please log in"});p.a.get("/api/auth/verify",{headers:a}).then((function(t){200===t.status?e.setState({loading:!1}):e.setState({loading:!1,redirect:!0})})).catch((function(t){e.setState({loading:!1,redirect:!0})}))}},{key:"render",value:function(){var a=this.state,n=a.loading,r=a.redirect;return n?null:r?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{to:{pathname:"/auth",state:{route:t,message:this.state.message}}})):l.a.createElement(l.a.Fragment,null,l.a.createElement(e,this.props))}}]),n}(n.Component)}var b=a(13),E=a(9),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={eventname:"",sponges:""},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.submit=a.submit.bind(Object(E.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"submit",value:function(e){e.preventDefault(),p.a.post("/api/events",{name:this.state.eventname,sponges:this.state.sponges}).then((function(e){console.log("Created event: "+e)})).catch((function(e){console.log(e)})),this.props.checkForUpdates()}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.submit},l.a.createElement("label",null,"Create an event ",l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"eventname",placeholder:"name",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"sponges",placeholder:"sponges",value:this.state.value,onChange:this.handleChange})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create"}))}}]),t}(n.Component),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("p",null," Events: "),l.a.createElement("ul",null,this.props.events.map((function(e){var t=e.id,a=e.name,n=e.data;return l.a.createElement("li",{key:t.toString()},a," ",n)}))))}}]),t}(n.Component),f=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).checkForUpdates=function(){p.a.get("/api/events").then((function(t){e.setState({events:t.data})})).catch((function(e){return console.log(e)}))},e.state={events:[]},e}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkForUpdates()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v,{checkForUpdates:this.checkForUpdates}),l.a.createElement(g,{events:this.state.events}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(i.b,{to:"/"},"Back to entryway"))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.login=a.login.bind(Object(E.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"login",value:function(e){var t=this;e.preventDefault(),p.a.post("/api/auth/login",{email:this.state.email,password:this.state.password}).then((function(e){200===e.status&&(localStorage.setItem("token",e.data.token),t.props.updateAuth(!0))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.props.auth?l.a.createElement(m.a,{to:"".concat(this.props.pathway)}):l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.login},l.a.createElement("label",null,"Login",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"email",placeholder:"email",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"password",placeholder:"password",value:this.state.value,onChange:this.handleChange})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",password:"",authorize:!1},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.signup=a.signup.bind(Object(E.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"signup",value:function(e){var t=this;e.preventDefault(),p.a.post("/api/auth/signup",{email:this.state.email,password:this.state.password,username:this.state.username}).then((function(e){200===e.status&&(localStorage.setItem("token",e.data.token),t.setState({authorize:!0}),t.props.updateAuth(!0))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.authorize?(console.log("authorized"),l.a.createElement(m.a,{to:"".concat(this.props.pathway)})):l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.signup},l.a.createElement("label",null,"Need to signup?",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"username",placeholder:"username",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"email",placeholder:"email",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"password",placeholder:"password",value:this.state.value,onChange:this.handleChange})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Signup"})))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).logout=a.logout.bind(Object(E.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"logout",value:function(e){localStorage.clear()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.logout},l.a.createElement("input",{type:"submit",value:"Logout"})))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).updateAuth=function(e){console.log("triggered",e),a.setState({auth:e})},a.state={pathway:"/",message:"",auth:!1},a.updateAuth=a.updateAuth.bind(Object(E.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state?(this.setState({pathway:this.props.location.state.route}),this.setState({message:this.props.location.state.message})):console.log("nothing");var t={authorization:"Bearer "+localStorage.getItem("token")};p.a.get("/api/auth/verify",{headers:t}).then((function(t){200===t.status?e.setState({auth:!0}):e.setState({auth:!1})})).catch((function(t){e.setState({auth:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.auth,a=e.pathway;return t?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"You are Already Logged In"),l.a.createElement(j,null)):l.a.createElement("div",null,l.a.createElement("h3",null,this.state.message),l.a.createElement(O,{pathway:a,updateAuth:this.updateAuth,auth:this.auth}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(y,{pathway:a,updateAuth:this.updateAuth,auth:this.auth}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(i.b,{to:"/"},"Back to entryway"),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(n.Component),k=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null," ABOUT 3 Ecologgiiiesssss ")}}]),t}(n.Component),S=a(37),x=a.n(S),w=(a(65),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Header"},l.a.createElement("img",{className:"Cup",src:x.a,alt:"teapot"})),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(i.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/events"},"Go to events")),l.a.createElement("li",null," ",l.a.createElement(i.b,{to:"/auth"},"Login or signup")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/entryway"},"EntryWay")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/about3e"},"3E About")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/oOoOs"},"404 oOoO Portal")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/patches"},"Patches")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/traces"},"Register a trace")))))}}]),t}(n.Component)),A=(a(66),a(38)),N=a.n(A),T=a(20),R=a(15),D=a.n(R),F=a(18),_=a(40),I=a(21),P=function(e,t){switch(console.log("hellloReducer"),t.type){case"FETCH_EVENTS":return console.log("fetching event",t.payload),Object(I.a)({},e,{loading:!1,events:t.payload});case"ADD_EVENT":return console.log("adding event",t.payload),Object(I.a)({},e,{events:[].concat(Object(_.a)(e.events),[t.payload])});case"DELETE_EVENT":return console.log("deleting event"),Object(I.a)({},e,{events:e.events.filter((function(e){return e.id!==t.payload}))});case"TRANSACTION_ERROR":return Object(I.a)({},e,{error:t.payload});default:return console.log("passing to default"),e}},U={events:[],error:null,loading:!0},B=Object(n.createContext)(U),L=function(e){var t=e.children,a=Object(n.useReducer)(P,U),r=Object(T.a)(a,2),c=r[0],o=r[1];function u(){return(u=Object(F.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/events4context");case 3:t=e.sent,o({type:"FETCH_EVENTS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function s(){return(s=Object(F.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,p.a.post("/api/events4context",t,a);case 4:n=e.sent,console.log(n.data),o({type:"ADD_EVENT",payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function i(){return(i=Object(F.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,p.a.delete("/api/events4context/".concat(t));case 4:o({type:"DELETE_EVENT",payload:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return l.a.createElement(B.Provider,{value:{events:c.events,error:c.error,loading:c.loading,fetchEvents:function(){return u.apply(this,arguments)},addEvent:function(e){return s.apply(this,arguments)},deleteEvent:function(e){return i.apply(this,arguments)}}},t)},z=function(){var e=Object(n.useState)(""),t=Object(T.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(T.a)(c,2),u=o[0],s=o[1],i=Object(n.useContext)(B).addEvent;return l.a.createElement("div",null,l.a.createElement("h3",null,"Add new transaction"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i({name:a,sponges:u})}},l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"name"},"Name"),l.a.createElement("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)},placeholder:"Enter text..."})),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"event_type"},"Event Type"),l.a.createElement("input",{type:"text",value:u,onChange:function(e){return s(e.target.value)},placeholder:"Enter event type..."}),l.a.createElement("button",{className:"btn"},"Add Event"))))},H=function(e){var t=e.event,a=Object(n.useContext)(B).deleteEvent;return l.a.createElement("li",{className:""},t.name,l.a.createElement("span",null,t.location),l.a.createElement("span",null,t.event_type),l.a.createElement("span",null,t.data?t.data:""),l.a.createElement("button",{onClick:function(){return e=t.id,void a(e);var e},className:"delete-btn"},"x"))},V=function(){var e=Object(n.useContext)(B),t=e.events,a=e.fetchEvents;return console.log(t),Object(n.useEffect)((function(){a()}),[]),l.a.createElement("ul",{className:"list"},t.map((function(e){return l.a.createElement(H,{key:e.id,event:e})})))};var M=function(){return l.a.createElement(L,null,l.a.createElement("div",null,l.a.createElement("h3",null,"glitch"),l.a.createElement(V,null),l.a.createElement(z,null),l.a.createElement("img",{src:N.a,alt:"glitch"})))},J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={image:"",tendencies:"",notes:""},a.onChange=a.onChange.bind(Object(E.a)(a)),a.submit=a.submit.bind(Object(E.a)(a)),a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){switch(e.target.name){case"image":this.setState({image:e.target.files[0]});break;default:this.setState(Object(b.a)({},e.target.name,e.target.value))}}},{key:"submit",value:function(){var e=Object(F.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new FormData,e.next=4,a.append("image",this.state.image);case 4:p.a.post("/api/assets/images",a,{"content-type":"multipart/form-data"}).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement("form",{encType:"multipart/form-data"},l.a.createElement("label",null,"Upload an image",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"tendencies",placeholder:"tendencies (comma-separated)",value:this.state.value,onChange:this.onChange}),l.a.createElement("input",{type:"text",name:"notes",placeholder:"notes",value:this.state.value,onChange:this.onChange}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"file",name:"image",onChange:this.onChange}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"button",value:"Upload",onClick:this.submit})))}}]),t}(n.Component),G=function(){return l.a.createElement("div",null,l.a.createElement(J,null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(i.b,{to:"/"},"Back to entryway"))};function W(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Home Hello"))}var Y=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(i.a,null,l.a.createElement(w,null),l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:"/",component:W}),l.a.createElement(m.b,{path:"/about3e",component:k}),l.a.createElement(m.b,{path:"/oOoOs",component:M}),l.a.createElement(m.b,{path:"/patches",render:function(){return l.a.createElement("div",null,"Patches")}}),l.a.createElement(m.b,{path:"/entryway",render:function(){return l.a.createElement("div",null,"Entry")}}),l.a.createElement(m.b,{exact:!0,path:"/auth",component:C}),l.a.createElement(m.b,{exact:!0,path:"/events",component:d(f,"/events")}),l.a.createElement(m.b,{exact:!0,path:"/traces",component:d(G,"/traces")})))}}]),t}(n.Component),q=a(39);a.n(q).a.render(l.a.createElement(Y,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.3a56d253.chunk.js.map